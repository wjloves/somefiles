<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!--#include virtual="./tpl/header.shtml"-->
    <link rel="stylesheet" href="js/artDialogV6/css/ui-dialog.css">
    <script language="javascript" type="text/javascript" src="js/artDialogV6/dist/dialog-min.js"></script>

    <style type="text/css">
        div.right div.main .col{width:200px;float:left;}
        input[type="reset"]{background-color:red;color:#fff;border:0px;padding: 5px 10px;border: 1px solid red;cursor: pointer;text-align: center;}
    </style>
</head>

<body>
<!--#include virtual="./tpl/menu.php" -->
<div class="right">
    <div class="top">
        <div class="login">
            <div class="login-tip">客服<span style="color:red;font-weight:600"><?php echo $this->_login['name'];?></span>于<?php echo date('Y年m月d日 h时i分',$this->_login['ltime']);?>登录</div>
            <input type="button" class="btn" onclick="window.location='./index.php?do=login-logout'" name="loginout" value="退出" />
            <!--#include virtual="./tpl/top.shtml" -->
        </div>
    </div>
    <div class="main">
        <form method="post">
        <table class="twoCel">
            <tbody>
            <tr>
                <th>代理团队名称：</th>
                <td><input type="text" name="agentname" value="<?php echo $_POST['agentname'] ?>" id="agentname" /></td>
            </tr>
            <tr>
                <th>代理帐号：</th>
                <td><input type="text" name="agentaccount" value="<?php echo $_POST['agentaccount'] ?>" id="agentaccount" /></td>
            </tr>
            <tr>
                <th>登陆密码：</th>
                <td><input type="text" name="password" value="<?php echo $_POST['password'] ?>" id="password" /></td>
            </tr>
            <tr>
                <th>设置返点：</th>
                <td><input type="text" name="rebate" value="<?php echo $_POST['rebate'] ?>" id="rebate" />%</td>
            </tr>
            <tr>
                <th>代理昵称：</th>
                <td><input type="text" name="nickname" value="<?php echo $_POST['nickname'] ?>" id="nickname" /></td>
            </tr>
            <tr>
                <th>代理提款姓名：</th>
                <td><input type="text" name="withdrawalname" value="<?php echo $_POST['withdrawalname'] ?>" id="withdrawalname" /></td>
            </tr>
            <tr>
                <th>提款银行类型：</th>
                <td><input type="text" name="bank" value="<?php echo $_POST['bank'] ?>" id="bank" /></td>
            </tr>
            <tr>
                <th>提款银行账号：</th>
                <td><input type="text" name="bankaccount" value="<?php echo $_POST['bankaccount'] ?>" id="bankaccount" /></td>
            </tr>
            <tr>
                <th>代理类别：</th>
                <td>
                    <select class="select" name="atype" id="atype">
                        <?php  foreach($data['atype'] as $k=>$v){?>
                        <option value="<?php echo $k ?>" <?php if($k==$_POST['atype']){ echo "selected";}?>><?php echo $v ?></option>
                        <?php }?>
                    </select>
                </td>
            </tr>
            <tr>
                <th>测试帐户：</th>
                <td><select class="" name="testaccount" id="testaccount">
                    <?php  foreach($data['testaccount'] as $k=>$v){?>
                    <option value="<?php echo $k ?>" <?php if($k==$_POST['testaccount']){ echo "selected";}?>><?php echo $v ?></option>
                    <?php }?>
                </select> </td>
            </tr>
            <tr>
                <th></th>
                <td><input type="button" onclick="add()" value="增加" />
                    <input type="reset" value="重置" /></td>
            </tr>

            </tbody>
         </table>
         </form>
        <div style="clear:both"></div>
    </div>
</div>
<script type="text/javascript">
        function add(){
            var agentaccount=$("#agentaccount").val();
            var agentname = $("#agentname").val();
            var bankaccount = $("#bankaccount").val();
            var nickname = $("#nickname").val();
            var password = $("#password").val();
            var withdrawalname = $("#withdrawalname").val();
            var password = $("#password").val();
            var bank = $("#bank").val();
            var rebate = $("#rebate").val();
            var regExpNumber = /^[0-9]+$/;
            var regExpRate = /^(?:0|[1-9][0-9]?|100)$/;
            if($.trim(agentname).length <= 0){
                alert('请输入代理团队名称');
                return false;
            }
            if($.trim(agentaccount).length <= 0){
                alert('请输入帐号');
                return false;
            }
            if ($.trim(password).length <= 0) {
                alert('请输入登陆密码');
                return false;
            }
            if (!(regExpRate.test(rebate))) {
                alert('返点必须为0-100的数字');
                return false;
            }
            if ($.trim(nickname).length <= 0) {
                alert('请输入代理昵称');
                return false;
            }
            if ($.trim(withdrawalname).length <= 0) {
                alert('请输入代理提款姓名');
                return false;
            }
            if ($.trim(bank).length <= 0) {
                alert('请输入提款银行类型');
                return false;
            }
            if (!(regExpNumber.test(bankaccount))) {
                alert('提款银行账号必须为数字');
                return false;
            }
            var param   = null;
            var url = './index.php?do=Agents-ajaxAgentsAdd';
            param ={
                agentaccount:$("#agentaccount").val(),
                password:$("#password").val(),
                nickname:$("#nickname").val(),
                atype:$("#atype").val(),
                rebate:$("#rebate").val(),
                agentname:$("#agentname").val(),
                withdrawalname:$("#withdrawalname").val(),
                bank:$("#bank").val(),
                bankaccount:$("#bankaccount").val(),
                testaccount:$("#testaccount").val()
            };
            $.post(url,param,function(data){
                var a=dialog({
                    content:data
                });
                a.showModal();
                setTimeout(function () {
                    a.close().remove();
                }, 1000);
            });
        }
</script>
</body>
</html>